<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>告警分析系统 - 企业级管理平台</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/modern.css">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🚨</text></svg>">
</head>
<body>
    <div class="layout">
        <!-- 侧边栏 -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="/" class="logo">
                    <div class="logo-icon">🚨</div>
                    <span>告警分析系统</span>
                </a>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-group">
                    <div class="nav-group-title">主要功能</div>
                    <a href="#dashboard" class="nav-item active" data-section="dashboard">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="9" y1="9" x2="15" y2="9"></line>
                            <line x1="9" y1="13" x2="15" y2="13"></line>
                            <line x1="9" y1="17" x2="13" y2="17"></line>
                        </svg>
                        <span class="nav-text">仪表板</span>
                        <span class="nav-badge" id="active-alarms-badge">0</span>
                    </a>
                    
                    <a href="#alarms" class="nav-item" data-section="alarms">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 9V5a3 3 0 0 0-6 0v4"></path>
                            <rect x="2" y="9" width="20" height="11" rx="2" ry="2"></rect>
                        </svg>
                        <span class="nav-text">告警管理</span>
                    </a>
                    
                    <a href="#analytics" class="nav-item" data-section="analytics">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="20" x2="18" y2="10"></line>
                            <line x1="12" y1="20" x2="12" y2="4"></line>
                            <line x1="6" y1="20" x2="6" y2="14"></line>
                        </svg>
                        <span class="nav-text">分析统计</span>
                    </a>
                </div>
                
                <div class="nav-group">
                    <div class="nav-group-title">系统管理</div>
                    <a href="#endpoints" class="nav-item" data-section="endpoints">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"></path>
                        </svg>
                        <span class="nav-text">接入点管理</span>
                    </a>
                    
                    <a href="#users" class="nav-item" data-section="users">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        <span class="nav-text">用户管理</span>
                    </a>
                    
                    <a href="#rules" class="nav-item" data-section="rules">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9,11 12,14 22,4"></polyline>
                            <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
                        </svg>
                        <span class="nav-text">规则管理</span>
                    </a>
                    
                    <a href="#settings" class="nav-item" data-section="settings">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                        </svg>
                        <span class="nav-text">系统设置</span>
                    </a>
                </div>
            </nav>
        </aside>

        <!-- 主内容区 -->
        <main class="main-content">
            <!-- 顶部导航 -->
            <header class="header">
                <div class="header-left">
                    <button class="btn btn-secondary" data-toggle="sidebar">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="3" y1="6" x2="21" y2="6"></line>
                            <line x1="3" y1="12" x2="21" y2="12"></line>
                            <line x1="3" y1="18" x2="21" y2="18"></line>
                        </svg>
                    </button>
                    <h1 id="page-title">企业级告警管理平台</h1>
                </div>
                
                <div class="header-right">
                    <button class="btn btn-secondary" onclick="window.framework.toggleTheme()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                    </button>
                    
                    <div class="user-menu">
                        <button class="btn btn-primary">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            管理员
                        </button>
                    </div>
                </div>
            </header>

            <!-- 内容区域 -->
            <div class="content-area" style="padding: 2rem;">
                <!-- 仪表板页面 -->
                <div id="dashboard-section" class="section">
                    <!-- 统计卡片 -->
                    <div class="grid grid-cols-4" style="margin-bottom: 2rem;">
                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-title">总告警数</div>
                                <div class="stat-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M14 9V5a3 3 0 0 0-6 0v4"></path>
                                        <rect x="2" y="9" width="20" height="11" rx="2" ry="2"></rect>
                                    </svg>
                                </div>
                            </div>
                            <div class="stat-value" id="total-alarms">-</div>
                            <div class="stat-change positive">
                                <svg class="stat-change-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="23,6 13.5,15.5 8.5,10.5 1,18"></polyline>
                                    <polyline points="17,6 23,6 23,12"></polyline>
                                </svg>
                                <span>24小时内</span>
                            </div>
                        </div>

                        <div class="stat-card critical">
                            <div class="stat-header">
                                <div class="stat-title">活跃告警</div>
                                <div class="stat-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                                        <line x1="12" y1="9" x2="12" y2="13"></line>
                                        <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                    </svg>
                                </div>
                            </div>
                            <div class="stat-value" id="active-alarms">-</div>
                            <div class="stat-change negative">
                                <svg class="stat-change-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="23,18 13.5,8.5 8.5,13.5 1,6"></polyline>
                                    <polyline points="17,18 23,18 23,12"></polyline>
                                </svg>
                                <span>需要处理</span>
                            </div>
                        </div>

                        <div class="stat-card low">
                            <div class="stat-header">
                                <div class="stat-title">已解决</div>
                                <div class="stat-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="20,6 9,17 4,12"></polyline>
                                    </svg>
                                </div>
                            </div>
                            <div class="stat-value" id="resolved-alarms">-</div>
                            <div class="stat-change positive">
                                <svg class="stat-change-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="23,6 13.5,15.5 8.5,10.5 1,18"></polyline>
                                    <polyline points="17,6 23,6 23,12"></polyline>
                                </svg>
                                <span>今日解决</span>
                            </div>
                        </div>

                        <div class="stat-card high">
                            <div class="stat-header">
                                <div class="stat-title">严重告警</div>
                                <div class="stat-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <line x1="12" y1="8" x2="12" y2="12"></line>
                                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                                    </svg>
                                </div>
                            </div>
                            <div class="stat-value" id="critical-alarms">-</div>
                            <div class="stat-change negative">
                                <svg class="stat-change-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="23,18 13.5,8.5 8.5,13.5 1,6"></polyline>
                                    <polyline points="17,18 23,18 23,12"></polyline>
                                </svg>
                                <span>高优先级</span>
                            </div>
                        </div>
                    </div>

                    <!-- 图表和表格区域 -->
                    <div class="grid grid-cols-2" style="margin-bottom: 2rem;">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">告警趋势图</h3>
                                <div class="card-subtitle">最近24小时告警变化趋势</div>
                            </div>
                            <div class="card-body">
                                <div id="alarm-trend-chart" style="height: 300px;">
                                    <div class="loading">正在加载图表数据...</div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">严重程度分布</h3>
                                <div class="card-subtitle">当前活跃告警的严重程度分布</div>
                            </div>
                            <div class="card-body">
                                <div id="severity-chart" style="height: 300px;">
                                    <div class="loading">正在加载图表数据...</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 最新告警列表 -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">最新告警</h3>
                            <div class="card-subtitle">实时显示最新的告警信息</div>
                        </div>
                        <div class="card-body">
                            <div id="recent-alarms-table">
                                <div class="loading">正在加载最新告警...</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 告警管理页面 -->
                <div id="alarms-section" class="section hidden">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">告警管理</h3>
                            <div class="card-subtitle">管理和处理系统告警</div>
                        </div>
                        <div class="card-body">
                            <div id="alarms-table">
                                <div class="loading">正在加载告警数据...</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 分析统计页面 -->
                <div id="analytics-section" class="section hidden">
                    <div class="grid grid-cols-2" style="margin-bottom: 2rem;">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">TOP告警源</h3>
                                <div class="card-subtitle">产生告警最多的系统</div>
                            </div>
                            <div class="card-body">
                                <div id="top-sources-chart">
                                    <div class="loading">正在加载数据...</div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">告警响应时间</h3>
                                <div class="card-subtitle">平均解决时间趋势</div>
                            </div>
                            <div class="card-body">
                                <div id="response-time-chart">
                                    <div class="loading">正在加载数据...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 接入点管理页面 -->
                <div id="endpoints-section" class="section hidden">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">接入点管理</h3>
                            <div class="card-subtitle">管理告警数据接入点</div>
                            <button class="btn btn-primary" onclick="showCreateEndpointModal()">
                                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="5" x2="12" y2="19"></line>
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                </svg>
                                创建接入点
                            </button>
                        </div>
                        <div class="card-body">
                            <div id="endpoints-table">
                                <div class="loading">正在加载接入点数据...</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 用户管理页面 -->
                <div id="users-section" class="section hidden">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">用户管理</h3>
                            <div class="card-subtitle">管理系统用户和权限</div>
                            <button class="btn btn-primary" onclick="showCreateUserModal()">
                                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="5" x2="12" y2="19"></line>
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                </svg>
                                创建用户
                            </button>
                        </div>
                        <div class="card-body">
                            <div id="users-table">
                                <div class="loading">正在加载用户数据...</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 规则管理页面 -->
                <div id="rules-section" class="section hidden">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">规则管理</h3>
                            <div class="card-subtitle">配置告警分发和处理规则</div>
                        </div>
                        <div class="card-body">
                            <div id="rule-stats">
                                <div class="loading">正在加载规则统计...</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 系统设置页面 -->
                <div id="settings-section" class="section hidden">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">系统设置</h3>
                            <div class="card-subtitle">配置系统参数和偏好</div>
                        </div>
                        <div class="card-body">
                            <div class="grid grid-cols-2">
                                <div class="form-group">
                                    <label class="form-label">主题设置</label>
                                    <select class="form-select" id="theme-select">
                                        <option value="light">浅色主题</option>
                                        <option value="dark">深色主题</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">数据刷新间隔</label>
                                    <select class="form-select" id="refresh-interval">
                                        <option value="30">30秒</option>
                                        <option value="60">1分钟</option>
                                        <option value="300">5分钟</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- 创建接入点模态框 -->
    <div id="create-endpoint-modal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">创建接入点</h2>
                <button class="modal-close" data-dismiss="modal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <form id="endpoint-form">
                    <div class="form-group">
                        <label class="form-label">接入点名称</label>
                        <input type="text" class="form-input" id="endpoint-name" placeholder="输入接入点名称" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">接入点类型</label>
                        <select class="form-select" id="endpoint-type" required>
                            <option value="">请选择类型</option>
                            <option value="http">HTTP</option>
                            <option value="webhook">Webhook</option>
                            <option value="syslog">Syslog</option>
                            <option value="email">Email</option>
                            <option value="api">API</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">描述</label>
                        <textarea class="form-textarea" id="endpoint-description" placeholder="输入接入点描述"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-dismiss="modal">取消</button>
                <button class="btn btn-primary" onclick="createEndpoint()">创建</button>
            </div>
        </div>
    </div>

    <!-- 创建用户模态框 -->
    <div id="create-user-modal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">创建用户</h2>
                <button class="modal-close" data-dismiss="modal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <form id="user-form">
                    <div class="form-group">
                        <label class="form-label">用户名</label>
                        <input type="text" class="form-input" id="user-username" placeholder="输入用户名" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">邮箱</label>
                        <input type="email" class="form-input" id="user-email" placeholder="输入邮箱地址" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">密码</label>
                        <input type="password" class="form-input" id="user-password" placeholder="输入密码" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">全名</label>
                        <input type="text" class="form-input" id="user-fullname" placeholder="输入真实姓名">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-dismiss="modal">取消</button>
                <button class="btn btn-primary" onclick="createUser()">创建</button>
            </div>
        </div>
    </div>

    <script src="/static/js/modern-framework.js"></script>
    <script src="/static/js/admin-app.js"></script>
</body>
</html>